<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>你不知道的 Web Api | YuNotes</title>
    <meta name="description" content="记录工作、记录生活">
    <link rel="icon" href="/yunotes/image/favicon.ico">
    
    <link rel="preload" href="/yunotes/assets/css/0.styles.1aebe3d3.css" as="style"><link rel="preload" href="/yunotes/assets/js/app.7aa05a17.js" as="script"><link rel="preload" href="/yunotes/assets/js/23.3fc58a65.js" as="script"><link rel="prefetch" href="/yunotes/assets/js/10.e530a24d.js"><link rel="prefetch" href="/yunotes/assets/js/11.afa82878.js"><link rel="prefetch" href="/yunotes/assets/js/12.871f24e6.js"><link rel="prefetch" href="/yunotes/assets/js/13.33a7823f.js"><link rel="prefetch" href="/yunotes/assets/js/14.bf140826.js"><link rel="prefetch" href="/yunotes/assets/js/15.d30551f4.js"><link rel="prefetch" href="/yunotes/assets/js/16.731c0f31.js"><link rel="prefetch" href="/yunotes/assets/js/17.98b7a028.js"><link rel="prefetch" href="/yunotes/assets/js/18.fcf5487b.js"><link rel="prefetch" href="/yunotes/assets/js/19.9053444e.js"><link rel="prefetch" href="/yunotes/assets/js/2.e8d26dc8.js"><link rel="prefetch" href="/yunotes/assets/js/20.4d3c887a.js"><link rel="prefetch" href="/yunotes/assets/js/21.da570d44.js"><link rel="prefetch" href="/yunotes/assets/js/22.cfb55a66.js"><link rel="prefetch" href="/yunotes/assets/js/24.3b828050.js"><link rel="prefetch" href="/yunotes/assets/js/25.ed272328.js"><link rel="prefetch" href="/yunotes/assets/js/26.56978f51.js"><link rel="prefetch" href="/yunotes/assets/js/27.236a9be4.js"><link rel="prefetch" href="/yunotes/assets/js/28.1ce53620.js"><link rel="prefetch" href="/yunotes/assets/js/29.8bcccd28.js"><link rel="prefetch" href="/yunotes/assets/js/3.b733a958.js"><link rel="prefetch" href="/yunotes/assets/js/30.651c269d.js"><link rel="prefetch" href="/yunotes/assets/js/31.90153dcc.js"><link rel="prefetch" href="/yunotes/assets/js/32.fd176148.js"><link rel="prefetch" href="/yunotes/assets/js/33.b24a2cdc.js"><link rel="prefetch" href="/yunotes/assets/js/34.10605f3e.js"><link rel="prefetch" href="/yunotes/assets/js/35.5b54f0d9.js"><link rel="prefetch" href="/yunotes/assets/js/36.0a0cf58a.js"><link rel="prefetch" href="/yunotes/assets/js/37.98ab94b0.js"><link rel="prefetch" href="/yunotes/assets/js/38.27bd58de.js"><link rel="prefetch" href="/yunotes/assets/js/39.68257d4f.js"><link rel="prefetch" href="/yunotes/assets/js/4.daf370d6.js"><link rel="prefetch" href="/yunotes/assets/js/40.9304cfc8.js"><link rel="prefetch" href="/yunotes/assets/js/41.f5e9f3ce.js"><link rel="prefetch" href="/yunotes/assets/js/42.7b708993.js"><link rel="prefetch" href="/yunotes/assets/js/43.d9fb6920.js"><link rel="prefetch" href="/yunotes/assets/js/44.ef0f4f10.js"><link rel="prefetch" href="/yunotes/assets/js/45.30dff07b.js"><link rel="prefetch" href="/yunotes/assets/js/46.355c12e2.js"><link rel="prefetch" href="/yunotes/assets/js/47.6cae1468.js"><link rel="prefetch" href="/yunotes/assets/js/5.b9c60a27.js"><link rel="prefetch" href="/yunotes/assets/js/6.da8604b5.js"><link rel="prefetch" href="/yunotes/assets/js/7.d727ae99.js"><link rel="prefetch" href="/yunotes/assets/js/8.b320ee7b.js"><link rel="prefetch" href="/yunotes/assets/js/9.ff7624d0.js">
    <link rel="stylesheet" href="/yunotes/assets/css/0.styles.1aebe3d3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/yunotes/" class="home-link router-link-active"><img src="/yunotes/image/favicon.ico" alt="YuNotes" class="logo"> <span class="site-name can-hide">YuNotes</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/yunotes/" class="nav-link">主页</a></div><div class="nav-item"><a href="/yunotes/guide/" class="nav-link router-link-active">指南</a></div><div class="nav-item"><a href="/yunotes/vue-admin-pro/" class="nav-link">Vue Admin Pro</a></div> <a href="https://github.com/liuqiyu/yunotes" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/yunotes/" class="nav-link">主页</a></div><div class="nav-item"><a href="/yunotes/guide/" class="nav-link router-link-active">指南</a></div><div class="nav-item"><a href="/yunotes/vue-admin-pro/" class="nav-link">Vue Admin Pro</a></div> <a href="https://github.com/liuqiyu/yunotes" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/yunotes/guide/" class="sidebar-link">介绍</a></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>青年文摘</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/yunotes/guide/youth-literary-digest/article-1.html" class="active sidebar-link">1、你不知道的Web Api</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yunotes/guide/youth-literary-digest/article-1.html#_1、closeset" class="sidebar-link">1、closeset</a></li><li class="sidebar-sub-header"><a href="/yunotes/guide/youth-literary-digest/article-1.html#_2、dataset" class="sidebar-link">2、dataset</a></li><li class="sidebar-sub-header"><a href="/yunotes/guide/youth-literary-digest/article-1.html#_3、urlsearchparams" class="sidebar-link">3、URLSearchParams</a></li><li class="sidebar-sub-header"><a href="/yunotes/guide/youth-literary-digest/article-1.html#_4、hidden" class="sidebar-link">4、hidden</a></li><li class="sidebar-sub-header"><a href="/yunotes/guide/youth-literary-digest/article-1.html#_5、classlist" class="sidebar-link">5、classList</a></li><li class="sidebar-sub-header"><a href="/yunotes/guide/youth-literary-digest/article-1.html#_6、getboundingclientrect" class="sidebar-link">6、getBoundingClientRect</a></li><li class="sidebar-sub-header"><a href="/yunotes/guide/youth-literary-digest/article-1.html#_7、contains" class="sidebar-link">7、contains</a></li><li class="sidebar-sub-header"><a href="/yunotes/guide/youth-literary-digest/article-1.html#_8、online-state" class="sidebar-link">8、online state</a></li><li class="sidebar-sub-header"><a href="/yunotes/guide/youth-literary-digest/article-1.html#_9、battery-state" class="sidebar-link">9、battery state</a></li><li class="sidebar-sub-header"><a href="/yunotes/guide/youth-literary-digest/article-1.html#_10、vibration" class="sidebar-link">10、vibration</a></li><li class="sidebar-sub-header"><a href="/yunotes/guide/youth-literary-digest/article-1.html#_11、page-visibility" class="sidebar-link">11、page visibility</a></li><li class="sidebar-sub-header"><a href="/yunotes/guide/youth-literary-digest/article-1.html#_12、deviceorientation" class="sidebar-link">12、deviceOrientation</a></li><li class="sidebar-sub-header"><a href="/yunotes/guide/youth-literary-digest/article-1.html#_13、todataurl" class="sidebar-link">13、toDataURL</a></li><li class="sidebar-sub-header"><a href="/yunotes/guide/youth-literary-digest/article-1.html#_14、customevent" class="sidebar-link">14、customEvent</a></li><li class="sidebar-sub-header"><a href="/yunotes/guide/youth-literary-digest/article-1.html#_15、notification" class="sidebar-link">15、notification</a></li><li class="sidebar-sub-header"><a href="/yunotes/guide/youth-literary-digest/article-1.html#_16、fullscreen" class="sidebar-link">16、fullScreen</a></li><li class="sidebar-sub-header"><a href="/yunotes/guide/youth-literary-digest/article-1.html#_17、orientation" class="sidebar-link">17、orientation</a></li><li class="sidebar-sub-header"><a href="/yunotes/guide/youth-literary-digest/article-1.html#总结" class="sidebar-link">总结</a></li></ul></li><li><a href="/yunotes/guide/youth-literary-digest/article-2.html" class="sidebar-link">2、Vue 脱坑 A计划</a></li><li><a href="/yunotes/guide/youth-literary-digest/article-3.html" class="sidebar-link">3、Javascript 和 Sass 共享变量</a></li><li><a href="/yunotes/guide/youth-literary-digest/article-4.html" class="sidebar-link">4、Vue 生命周期钩子自定义事件</a></li><li><a href="/yunotes/guide/youth-literary-digest/article-5.html" class="sidebar-link">5、揭秘 ES6 之 Class 用法</a></li><li><a href="/yunotes/guide/youth-literary-digest/article-6.html" class="sidebar-link">6、揭秘 JS 之 继承 百万财产</a></li><li><a href="/yunotes/guide/youth-literary-digest/article-7.html" class="sidebar-link">7、揭秘 JS 之 你的Promise</a></li><li><a href="/yunotes/guide/youth-literary-digest/article-8.html" class="sidebar-link">8、揭秘 JS 之 call、apply、bind</a></li><li><a href="/yunotes/guide/youth-literary-digest/article-9.html" class="sidebar-link">9、快看，前端开发者都收藏了这几张图表</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Vue</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/yunotes/guide/vue/introduction.html" class="sidebar-link">介绍</a></li><li><a href="/yunotes/guide/vue/vue-count-to.html" class="sidebar-link">VueCountTo</a></li><li><a href="/yunotes/guide/vue/DLLPlugin.html" class="sidebar-link">DLLPlugin</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>React</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/yunotes/guide/react/introduction.html" class="sidebar-link">介绍</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Git 从入门到放弃</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/yunotes/guide/git/case.html" class="sidebar-link">实用案例</a></li><li><a href="/yunotes/guide/git/check-commit.html" class="sidebar-link">使用 husky 和 lint-staged检测</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="你不知道的-web-api"><a href="#你不知道的-web-api" aria-hidden="true" class="header-anchor">#</a> 你不知道的 Web Api</h1> <h2 id="_1、closeset"><a href="#_1、closeset" aria-hidden="true" class="header-anchor">#</a> 1、closeset</h2> <p>元素可以向上查询到父元素。</p> <p><code>document.querySelector('.main-header-box').closest('.view-container')</code></p> <h2 id="_2、dataset"><a href="#_2、dataset" aria-hidden="true" class="header-anchor">#</a> 2、dataset</h2> <p>可以获取原生标签以<code>data-</code>为前缀的属性集合:</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">data-a</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-b</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>div<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>dataset<span class="token punctuation">)</span>

<span class="token comment">// DOMStringMap {a: &quot;1&quot;, b: &quot;2&quot;}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_3、urlsearchparams"><a href="#_3、urlsearchparams" aria-hidden="true" class="header-anchor">#</a> 3、URLSearchParams</h2> <p>假设浏览器的 url 参数是 &quot;?name=蜘蛛侠&amp;age=16&quot;</p> <p><code>new URLSearchParams(location.search).get(&quot;name&quot;); // 蜘蛛侠</code></p> <h2 id="_4、hidden"><a href="#_4、hidden" aria-hidden="true" class="header-anchor">#</a> 4、hidden</h2> <p>这是一个 html 属性，规定元素是否隐藏，表现跟 css 的 display: none 一致：</p> <p><code>&lt;div hidden&gt;我被隐藏了&lt;/div&gt;</code></p> <p><code>document.querySelector(&quot;div&quot;).hidden = true / false;</code></p> <h2 id="_5、classlist"><a href="#_5、classlist" aria-hidden="true" class="header-anchor">#</a> 5、classList</h2> <p>这是一个对象，该对象里封装了许多操作元素类名的方法：</p> <p><code>&lt;p class=&quot;title&quot;&gt;&lt;/p&gt;</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> elem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span>

<span class="token comment">// 增加类名</span>
elem<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'title-new'</span><span class="token punctuation">)</span> <span class="token comment">// &quot;title title-new&quot;</span>

<span class="token comment">// 删除类名</span>
elem<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span> <span class="token comment">// &quot;title-new&quot;</span>

<span class="token comment">// 切换类名（有则删、无则增，常用于一些切换操作，如显示/隐藏）</span>
elem<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">toggle</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span> <span class="token comment">// &quot;title-new title&quot;</span>

<span class="token comment">// 替换类名</span>
elem<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'title-old'</span><span class="token punctuation">)</span> <span class="token comment">// &quot;title-new title-old&quot;</span>

<span class="token comment">// 是否包含指定类名</span>
elem<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="_6、getboundingclientrect"><a href="#_6、getboundingclientrect" aria-hidden="true" class="header-anchor">#</a> 6、getBoundingClientRect</h2> <p>可以获取指定元素在当前页面的空间信息：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>elem<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 返回</span>
<span class="token punctuation">{</span>
  x<span class="token punctuation">:</span> <span class="token number">604.875</span><span class="token punctuation">,</span>
  y<span class="token punctuation">:</span> <span class="token number">1312</span><span class="token punctuation">,</span>
  width<span class="token punctuation">:</span> <span class="token number">701.625</span><span class="token punctuation">,</span>
  height<span class="token punctuation">:</span> <span class="token number">31</span><span class="token punctuation">,</span>
  top<span class="token punctuation">:</span> <span class="token number">1312</span><span class="token punctuation">,</span>
  right<span class="token punctuation">:</span> <span class="token number">1306.5</span><span class="token punctuation">,</span>
  bottom<span class="token punctuation">:</span> <span class="token number">1343</span><span class="token punctuation">,</span>
  left<span class="token punctuation">:</span> <span class="token number">604.875</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_7、contains"><a href="#_7、contains" aria-hidden="true" class="header-anchor">#</a> 7、contains</h2> <p>可以判断指定元素是否包含了指定的子元素：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_8、online-state"><a href="#_8、online-state" aria-hidden="true" class="header-anchor">#</a> 8、online state</h2> <p>监听当前的网络状态变动，然后执行对应的方法：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'online'</span><span class="token punctuation">,</span> xxx<span class="token punctuation">)</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'offline'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'你断网啦！'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_9、battery-state"><a href="#_9、battery-state" aria-hidden="true" class="header-anchor">#</a> 9、battery state</h2> <p>获取设备的电池状态：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>navigator<span class="token punctuation">.</span><span class="token function">getBattery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">battery</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>battery<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 返回</span>
<span class="token punctuation">{</span>
  charging<span class="token punctuation">,</span> <span class="token comment">// 是否在充电</span>
    chargingTime<span class="token punctuation">,</span> <span class="token comment">// 充满电所需时间</span>
    dischargingTime<span class="token punctuation">,</span> <span class="token comment">// 当前电量可使用时间</span>
    level<span class="token punctuation">,</span>
    剩余电量

  onchargingchange<span class="token punctuation">,</span> <span class="token comment">// 监听充电状态变化</span>
    onchargingtimechange<span class="token punctuation">,</span> <span class="token comment">// 监听充满电所需时间变化</span>
    ondischargingtimechange<span class="token punctuation">,</span> <span class="token comment">// 监听当前电量可使用时间变化</span>
    onlevelchange <span class="token comment">// 监听电量变化</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>使用场景：提示用户电量已充满，或者为了让用户有安全感，电量低于 99%的时候来个弹框提示&quot;该充电啦&quot;✅</p> <h2 id="_10、vibration"><a href="#_10、vibration" aria-hidden="true" class="header-anchor">#</a> 10、vibration</h2> <p>嘻嘻，使设备进行震动：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 震动一次</span>
navigator<span class="token punctuation">.</span><span class="token function">vibrate</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>

<span class="token comment">// 连续震动，震动200ms、暂停100ms、震动300ms</span>
navigator<span class="token punctuation">.</span><span class="token function">vibrate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>效果如下：不好意思你得用你自己的手握住手机才能感受得到;</p> <p>使用场景：通过振动来提供感官反馈，比如太久没有触摸屏幕的时候连续震动提醒用户 ✅</p> <h2 id="_11、page-visibility"><a href="#_11、page-visibility" aria-hidden="true" class="header-anchor">#</a> 11、page visibility</h2> <p>顾名思义，这个 API 是用来监听页面可见性变化的，在 PC 端标签栏切换、最小化会触发、在移动端程序切到后台会触发，简单说就是页面消失了 🤦‍♂️</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'visibilitychange'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`页面可见性：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>document<span class="token punctuation">.</span>visibilityState<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_12、deviceorientation"><a href="#_12、deviceorientation" aria-hidden="true" class="header-anchor">#</a> 12、deviceOrientation</h2> <p>陀螺仪，也就是设备的方向，又名重力感应，该 API 在 IOS 设备上失效的解决办法，将域名协议改成 https：</p> <p>从左到右分别为 alpha、beta、gamma;</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'deviceorientation'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">{</span> alpha<span class="token punctuation">,</span> beta<span class="token punctuation">,</span> gamma <span class="token punctuation">}</span> <span class="token operator">=</span> event

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`alpha：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>alpha<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`beta：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>beta<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`gamma：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>gamma<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>使用场景：页面上的某些元素需要根据手机摆动进行移动，达到视差的效果，比如王者荣耀进入游戏的那个界面，手机转动背景图会跟着动 😂</p> <h2 id="_13、todataurl"><a href="#_13、todataurl" aria-hidden="true" class="header-anchor">#</a> 13、toDataURL</h2> <p>这个 canvas 的 API，作用是将画布的内容转换成一个 base64 的图片地址；</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;canvas&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> context <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&quot;2d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 画东西</span>
<span class="token operator">...</span>

<span class="token keyword">let</span> url <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token string">&quot;image/png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将画布内容转换成base64地址</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>使用 a 标签进行图片下载时，图片链接跨域，无法进行下载而是进行图片预览：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>xxx<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>xxx<span class="token punctuation">&quot;</span></span> <span class="token attr-name">download</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>avatar<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>下载图片<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>封装以下代码便可解决 ✅</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">downloadImage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 实例化画布</span>
  <span class="token keyword">let</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> context <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span>

  <span class="token comment">// 实例化一个图片对象</span>
  <span class="token keyword">let</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  image<span class="token punctuation">.</span>crossOrigin <span class="token operator">=</span> <span class="token string">'Anonymous'</span>
  image<span class="token punctuation">.</span>src <span class="token operator">=</span> url

  <span class="token comment">// 当图片加载完毕</span>
  image<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 将图片画在画布上</span>
    canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> image<span class="token punctuation">.</span>height
    canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> image<span class="token punctuation">.</span>width
    context<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

    <span class="token comment">// 将画布的内容转换成base64地址</span>
    <span class="token keyword">let</span> dataURL <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token string">'image/png'</span><span class="token punctuation">)</span>

    <span class="token comment">// 创建a标签模拟点击进行下载</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
    a<span class="token punctuation">.</span>hidden <span class="token operator">=</span> <span class="token boolean">true</span>
    a<span class="token punctuation">.</span>href <span class="token operator">=</span> dataURL
    a<span class="token punctuation">.</span>download <span class="token operator">=</span> name

    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
    a<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="_14、customevent"><a href="#_14、customevent" aria-hidden="true" class="header-anchor">#</a> 14、customEvent</h2> <p>自定义事件，就跟 vue 里面的 on 跟 emit 一样；</p> <p>监听自定义事件：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'follow'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>detail<span class="token punctuation">)</span> <span class="token comment">// 输出 {name: &quot;前端宇宙情报局&quot;}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>派发自定义事件：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>
  <span class="token keyword">new</span> <span class="token class-name">CustomEvent</span><span class="token punctuation">(</span><span class="token string">'follow'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    detail<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'前端宇宙情报局'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_15、notification"><a href="#_15、notification" aria-hidden="true" class="header-anchor">#</a> 15、notification</h2> <p>PC 端的桌面通知，如网页端的微信，当收到消息时，右下角会出现一个通知（尽管你把浏览器最小化），因为这个通知时独立于浏览器的，是系统的一个原生控件；</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> notice <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Notification</span><span class="token punctuation">(</span><span class="token string">'前端宇宙情报局'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  body<span class="token punctuation">:</span> <span class="token string">'这20个不常用的Web API真的有用吗?，别问，问就是有用🈶'</span><span class="token punctuation">,</span>
  icon<span class="token punctuation">:</span> <span class="token string">'我的掘金头像'</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    url<span class="token punctuation">:</span> <span class="token string">'https://www.baidu.com'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 点击回调</span>
notice<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>notice<span class="token punctuation">.</span>data<span class="token punctuation">.</span>url<span class="token punctuation">)</span> <span class="token comment">// 当用户点击通知时，在浏览器打开百度网站</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>注意：想要成功的调起通知，首先要用户的授权 ✅</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Notification<span class="token punctuation">.</span><span class="token function">requestPermission</span><span class="token punctuation">(</span><span class="token parameter">prem</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  prem <span class="token operator">==</span> <span class="token string">'granted'</span> <span class="token comment">// 同意</span>
  prem <span class="token operator">==</span> <span class="token string">'denied'</span> <span class="token comment">// 拒绝</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>所以，再调用之前先向用户发起请求：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> permission <span class="token operator">=</span> Notification<span class="token punctuation">.</span>permission<span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>permission <span class="token operator">==</span> <span class="token string">&quot;granted&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 已同意，开始发送通知</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>permission <span class="token operator">==</span> <span class="token string">&quot;denied&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 不同意，发不了咯</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// 其他状态，可以重新发送授权提示</span>
  Notification<span class="token punctuation">.</span><span class="token function">requestPermission</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_16、fullscreen"><a href="#_16、fullscreen" aria-hidden="true" class="header-anchor">#</a> 16、fullScreen</h2> <p>全屏不咯? 之前的一个项目刚好用上，不仅仅可以作用在 documentElement 上，还可以作用在指定元素；</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @method launchFullScreen 开启全屏
 * @param {Object} elem = document.documentElement 作用的元素
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">launchFullScreen</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">elem <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>requestFullScreen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    elem<span class="token punctuation">.</span><span class="token function">requestFullScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>mozRequestFullScreen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    elem<span class="token punctuation">.</span><span class="token function">mozRequestFullScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>elem<span class="token punctuation">.</span>webkitRequestFullScreen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    elem<span class="token punctuation">.</span><span class="token function">webkitRequestFullScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>作用在 documentElement 上没啥可以介绍的咯，就相当于 F11 开启全屏：</p> <p>就像效果图一样，会直接开启全屏，并且只显示指定的元素，元素的宽高填充了整个屏幕 ✅</p> <p>关闭全屏的时候需要注意的是，统一用 document 对象：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @method exitFullScreen 关闭全屏
 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">exitFullScreen</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>exitFullscreen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">exitFullscreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>mozCancelFullScreen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">mozCancelFullScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>webkitCancelFullScreen<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">webkitCancelFullScreen</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="_17、orientation"><a href="#_17、orientation" aria-hidden="true" class="header-anchor">#</a> 17、orientation</h2> <p>可以监听用户手机设备的旋转方向变化；</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">'orientationchange'</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML <span class="token operator">+=</span> <span class="token template-string"><span class="token string">`&lt;p&gt;屏幕旋转后的角度值：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>window<span class="token punctuation">.</span>orientation<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;`</span></span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>也可以使用 css 的媒体查询：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* 竖屏时样式 */</span>
<span class="token atrule"><span class="token rule">@media</span> all and <span class="token punctuation">(</span><span class="token property">orientation</span><span class="token punctuation">:</span> portrait<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">body::after</span> <span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">'竖屏'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/* 横屏时样式 */</span>
<span class="token atrule"><span class="token rule">@media</span> all and <span class="token punctuation">(</span><span class="token property">orientation</span><span class="token punctuation">:</span> landscape<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token selector">body::after</span> <span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">'横屏'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>使用场景：页面需要用户开启横屏来获得更好的体验，如王者荣耀里面的活动页 😂</p> <h2 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h2> <p>其实不常用的还有很多很多，有一些我没有发现或者没写，如 geoLocation 地理定位、execCommand 执行命令等，也欢迎大家补充，前几篇文章都是 css 相关，后面几篇先不写 css 啦，为好多内容大家都写过，想写一些新的，但是又难免会冲突~</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间: </span> <span class="time">8/24/2019, 10:40:13 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/yunotes/guide/" class="prev router-link-active">
          介绍
        </a></span> <span class="next"><a href="/yunotes/guide/youth-literary-digest/article-2.html">
          2、Vue 脱坑 A计划
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/yunotes/assets/js/app.7aa05a17.js" defer></script><script src="/yunotes/assets/js/23.3fc58a65.js" defer></script>
  </body>
</html>
