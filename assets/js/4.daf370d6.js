(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{173:function(t,s,a){t.exports=a.p+"assets/img/commit.82111729.jpg"},174:function(t,s,a){t.exports=a.p+"assets/img/changelog.aab78b46.jpg"},187:function(t,s,a){"use strict";a.r(s);var n=[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"git-commitlint"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#git-commitlint","aria-hidden":"true"}},[t._v("#")]),t._v(" Git Commitlint")]),t._v(" "),n("h2",{attrs:{id:"开篇"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#开篇","aria-hidden":"true"}},[t._v("#")]),t._v(" 开篇")]),t._v(" "),n("p",[t._v("上一章写了"),n("code",[t._v("Git")]),t._v("的如何使用"),n("code",[t._v("Git hooks")]),t._v(" 检测提交代码的规范性，这篇文章在之前的基础上加了注释的功能。")]),t._v(" "),n("p",[t._v("在团队中代码提交（git commit）会有各种各样的风格，甚至有些人根本没有 commit 规范的概念，所以在我们回头去查找在哪个版本出现问题的时候，就会非常尴尬😅，很难快速定位到问题。为了项目的规范化，代码提交规范就显得尤为重要！下面是我做的代码提交规范插件 "),n("code",[t._v("vue-cli-plugin-commitlint")]),t._v("（对 "),n("code",[t._v("conventional-changelog-angular")]),t._v(" 进行了修改/封装）。开箱即用！")]),t._v(" "),n("h2",{attrs:{id:"功能"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#功能","aria-hidden":"true"}},[t._v("#")]),t._v(" 功能")]),t._v(" "),n("ul",[n("li",[t._v("自动检测 commit 是否规范，不规范不允许提交")]),t._v(" "),n("li",[t._v("自动提示 commit 填写格式。不怕忘记规范怎么写")]),t._v(" "),n("li",[t._v("集成 git add . && git commit 不需要在执行两个命令")]),t._v(" "),n("li",[t._v("自动生成 changelog")])]),t._v(" "),n("h2",{attrs:{id:"配置"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置","aria-hidden":"true"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i vue-cli-plugin-commitlint commitizen commitlint conventional-changelog-cli husky -D\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("在 "),n("code",[t._v("package.jso")]),t._v("n 中添加:")]),t._v(" "),n("div",{staticClass:"language-json line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"log"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"conventional-changelog --config ./node_modules/vue-cli-plugin-commitlint/lib/log -i CHANGELOG.md -s -r 0"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cz"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm run log && git add . && git cz"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"husky"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"hooks"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"commit-msg"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"commitlint -E HUSKY_GIT_PARAMS"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"config"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"commitizen"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"path"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./node_modules/vue-cli-plugin-commitlint/lib/cz"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br")])]),n("p",[t._v("增加 commitlint.config.js 文件")]),t._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v("module"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./node_modules/vue-cli-plugin-commitlint/lib/lint'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("h2",{attrs:{id:"使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用")]),t._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run cz  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# git add . && git commit -m 'feat:(xxx): xxx'")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run log "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生成 CHANGELOG")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("h3",{attrs:{id:"commit"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#commit","aria-hidden":"true"}},[t._v("#")]),t._v(" Commit")]),t._v(" "),n("p",[n("img",{attrs:{src:a(173),alt:"Commit"}})]),t._v(" "),n("h3",{attrs:{id:"change-log"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#change-log","aria-hidden":"true"}},[t._v("#")]),t._v(" Change log")]),t._v(" "),n("p",[n("img",{attrs:{src:a(174),alt:"Commit"}})]),t._v(" "),n("h2",{attrs:{id:"规则"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#规则","aria-hidden":"true"}},[t._v("#")]),t._v(" 规则")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("规范名")]),t._v(" "),n("th",[t._v("描述")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("docs")]),t._v(" "),n("td",[t._v("仅仅修改了文档，比如 README, CHANGELOG, CONTRIBUTE 等等")])]),t._v(" "),n("tr",[n("td",[t._v("chore")]),t._v(" "),n("td",[t._v("改变构建流程、或者增加依赖库、工具等")])]),t._v(" "),n("tr",[n("td",[t._v("feat")]),t._v(" "),n("td",[t._v("新增 feature")])]),t._v(" "),n("tr",[n("td",[t._v("fix")]),t._v(" "),n("td",[t._v("修复 bug")])]),t._v(" "),n("tr",[n("td",[t._v("merge")]),t._v(" "),n("td",[t._v("合并分支")])]),t._v(" "),n("tr",[n("td",[t._v("perf")]),t._v(" "),n("td",[t._v("优化相关，比如提升性能、体验")])]),t._v(" "),n("tr",[n("td",[t._v("refactor")]),t._v(" "),n("td",[t._v("代码重构，没有加新功能或者修复 bug")])]),t._v(" "),n("tr",[n("td",[t._v("revert")]),t._v(" "),n("td",[t._v("回滚到上一个版本")])]),t._v(" "),n("tr",[n("td",[t._v("style")]),t._v(" "),n("td",[t._v("仅仅修改了空格、格式缩进、都好等等，不改变代码逻辑")])]),t._v(" "),n("tr",[n("td",[t._v("test")]),t._v(" "),n("td",[t._v("测试用例，包括单元测试、集成测试等")])])])])])}],e=a(0),r=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},n,!1,null,null,null);s.default=r.exports}}]);